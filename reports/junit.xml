<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="12" skipped="16" tests="106" time="6.244" timestamp="2025-10-17T16:20:29.397267-04:00" hostname="Mac"><testcase classname="tests.test_agent_ebay" name="test_ebay_search_returns_list" time="0.003" /><testcase classname="tests.test_agent_ebay" name="test_basic_search_returns_items" time="0.001" /><testcase classname="tests.test_agent_ebay" name="test_fixed_price_only_filters_items" time="0.001" /><testcase classname="tests.test_agent_ebay" name="test_limit_and_max_results" time="0.001" /><testcase classname="tests.test_agent_keepa" name="test_keepa_search_returns_products" time="0.001" /><testcase classname="tests.test_agent_keepa" name="test_keepa_search_max_results" time="0.001" /><testcase classname="tests.test_agent_keepa" name="test_keepa_search_default_domain" time="0.001" /><testcase classname="tests.test_agent_keepa" name="test_keepa_search_empty_result" time="0.001" /><testcase classname="tests.test_agent_keepa" name="test_keepa_search_includes_enhanced_fields" time="0.001" /><testcase classname="tests.test_agent_keepa" name="test_keepa_search_handles_missing_optional_fields" time="0.001" /><testcase classname="tests.test_agent_keepa" name="test_keepa_search_passes_through_badges_and_flags" time="0.001" /><testcase classname="tests.test_agent_serp" name="test_google_shopping_basic" time="0.002" /><testcase classname="tests.test_agent_serp" name="test_google_shopping_num_limit" time="0.001" /><testcase classname="tests.test_agent_serp" name="test_google_shopping_location" time="0.001" /><testcase classname="tests.test_agent_serp" name="test_google_shopping_empty_result" time="0.001" /><testcase classname="tests.test_app" name="test_to_builtin_handles_basic_types" time="0.000" /><testcase classname="tests.test_app" name="test_to_builtin_raises_on_unknown" time="0.000" /><testcase classname="tests.test_app" name="test_merge_dicts_merges" time="0.000" /><testcase classname="tests.test_app" name="test_merge_dicts_none" time="0.000" /><testcase classname="tests.test_app" name="test_extract_params_parses_query" time="0.945" /><testcase classname="tests.test_app" name="test_extract_params_handles_bad_json" time="1.314" /><testcase classname="tests.test_app" name="test_aggregate_filters_by_price" time="0.001"><failure message="KeyError: 'query'">tests/test_app.py:93: in test_aggregate_filters_by_price
    out = aggregate(state)
          ^^^^^^^^^^^^^^^^
agents/app.py:312: in aggregate
    query=p["query"],
          ^^^^^^^^^^
E   KeyError: 'query'</failure></testcase><testcase classname="tests.test_app" name="test_aggregate_sorts_by_total_cost" time="0.000"><failure message="KeyError: 'query'">tests/test_app.py:105: in test_aggregate_sorts_by_total_cost
    out = aggregate(state)
          ^^^^^^^^^^^^^^^^
agents/app.py:312: in aggregate
    query=p["query"],
          ^^^^^^^^^^
E   KeyError: 'query'</failure></testcase><testcase classname="tests.test_app" name="test_respond_summarizes" time="0.001" /><testcase classname="tests.test_app" name="test_end_to_end_latency" time="0.004"><skipped type="pytest.skip" message="agents.app.run_agents not exported">/Users/scottmcanally/Desktop/PriceScouter/tests/test_app.py:135: agents.app.run_agents not exported</skipped></testcase><testcase classname="tests.test_app" name="test_vendor_timeout_enforced" time="0.001"><skipped type="pytest.skip" message="agents.app.run_agents not exported">/Users/scottmcanally/Desktop/PriceScouter/tests/test_app.py:145: agents.app.run_agents not exported</skipped></testcase><testcase classname="tests.test_app" name="test_concurrent_searches_latency" time="0.001"><skipped type="pytest.skip" message="agents.app.run_agents not exported">/Users/scottmcanally/Desktop/PriceScouter/tests/test_app.py:162: agents.app.run_agents not exported</skipped></testcase><testcase classname="tests.test_app" name="test_vendor_call_emit_log" time="0.001"><skipped type="pytest.skip" message="log_vendor_call not available">/Users/scottmcanally/Desktop/PriceScouter/tests/test_app.py:177: log_vendor_call not available</skipped></testcase><testcase classname="tests.test_app" name="test_error_path_logging" time="0.001"><skipped type="pytest.skip" message="log_vendor_error not available">/Users/scottmcanally/Desktop/PriceScouter/tests/test_app.py:184: log_vendor_error not available</skipped></testcase><testcase classname="tests.test_app" name="test_log_counts_for_multiple_vendors" time="0.000"><skipped type="pytest.skip" message="log_vendor_call not available">/Users/scottmcanally/Desktop/PriceScouter/tests/test_app.py:195: log_vendor_call not available</skipped></testcase><testcase classname="tests.test_chatbot_ui" name="test_normalize_price_str_to_float" time="0.001" /><testcase classname="tests.test_chatbot_ui" name="test_input_empty" time="0.000" /><testcase classname="tests.test_chatbot_ui" name="test_input_too_long" time="0.000" /><testcase classname="tests.test_chatbot_ui" name="test_happy_path_normalization" time="0.001" /><testcase classname="tests.test_chatbot_ui" name="test_dangerous_input" time="0.001" /><testcase classname="tests.test_chatbot_ui" name="test_google_normalization_drops_banned_columns" time="0.018" /><testcase classname="tests.test_chatbot_ui" name="test_regression_other_providers_unchanged_sort_filter" time="0.005" /><testcase classname="tests.test_chatbot_ui" name="test_system_like_google_path_enforces_ac_and_preview_logic" time="0.002" /><testcase classname="tests.test_client" name="test_run_agents_returns_rows" time="0.001" /><testcase classname="tests.test_client" name="test_run_agents_respects_top_n" time="0.001" /><testcase classname="tests.test_client" name="test_run_agents_empty_results" time="0.001" /><testcase classname="tests.test_ebay_tools" name="test_ebay_search_input_valid" time="0.001" /><testcase classname="tests.test_ebay_tools" name="test_ebay_search_input_empty_query" time="0.001" /><testcase classname="tests.test_ebay_tools" name="test_ebay_search_input_strip_query" time="0.001" /><testcase classname="tests.test_ebay_tools" name="test_get_endpoints_prod_and_sandbox" time="0.000" /><testcase classname="tests.test_ebay_tools" name="test_total_cost_computes" time="0.000" /><testcase classname="tests.test_ebay_tools" name="test_total_cost_no_shipping" time="0.000" /><testcase classname="tests.test_ebay_tools" name="test_search_ebay_cheapest_tool" time="0.001" /><testcase classname="tests.test_ebay_tools" name="test_search_ebay_cheapest_tool_excludes_auctions" time="0.000" /><testcase classname="tests.test_ebay_tools" name="test_get_basic_auth_header" time="0.001" /><testcase classname="tests.test_ebay_tools" name="test_get_basic_auth_header_missing" time="0.000" /><testcase classname="tests.test_ebay_tools" name="test_fail_fast_without_env" time="0.000" /><testcase classname="tests.test_ebay_tools" name="test_secrets_redacted_in_logs" time="0.001" /><testcase classname="tests.test_ebay_tools" name="test_no_hardcoded_secrets" time="0.002" /><testcase classname="tests.test_keepa_sellers" name="test_seller_label_from_offer_amazon" time="0.000" /><testcase classname="tests.test_keepa_sellers" name="test_seller_label_from_offer_fba" time="0.000" /><testcase classname="tests.test_keepa_sellers" name="test_seller_label_from_offer_mfn" time="0.000" /><testcase classname="tests.test_keepa_sellers" name="test_seller_label_from_id_amazon_magic" time="0.000" /><testcase classname="tests.test_keepa_sellers" name="test_keepa_populates_seller_from_buybox_fba" time="0.001"><failure message="IndexError: list index out of range">tests/test_keepa_sellers.py:65: in test_keepa_populates_seller_from_buybox_fba
    row = out[0]
          ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_keepa_sellers" name="test_keepa_populates_seller_amazon_when_stats_says_amazon" time="0.001"><failure message="IndexError: list index out of range">tests/test_keepa_sellers.py:73: in test_keepa_populates_seller_amazon_when_stats_says_amazon
    row = out[0]
          ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_keepa_sellers" name="test_keepa_populates_seller_mfn_when_winner_is_mfn" time="0.000"><failure message="IndexError: list index out of range">tests/test_keepa_sellers.py:82: in test_keepa_populates_seller_mfn_when_winner_is_mfn
    row = out[0]
          ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_keepa_sellers" name="test_keepa_seller_none_when_no_offers_and_no_buybox" time="0.001"><failure message="IndexError: list index out of range">tests/test_keepa_sellers.py:91: in test_keepa_seller_none_when_no_offers_and_no_buybox
    row = out[0]
          ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_keepa_sellers" name="test_keepa_regression_sellers_not_none_when_offers_present" time="0.000"><failure message="IndexError: list index out of range">tests/test_keepa_sellers.py:103: in test_keepa_regression_sellers_not_none_when_offers_present
    assert out[0]["seller"] is not None
           ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_keepa_sellers" name="test_keepa_prefers_stats_buybox_seller_over_offer_flag" time="0.000"><failure message="IndexError: list index out of range">tests/test_keepa_sellers.py:111: in test_keepa_prefers_stats_buybox_seller_over_offer_flag
    row = out[0]
          ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_keepa_tools" name="test_last_nonneg_basic" time="0.000" /><testcase classname="tests.test_keepa_tools" name="test_last_nonneg_none" time="0.000" /><testcase classname="tests.test_keepa_tools" name="test_last_nonneg_empty" time="0.000" /><testcase classname="tests.test_keepa_tools" name="test_clamp_offers_bounds[None-None]" time="0.000"><skipped type="pytest.skip" message="_clamp_offers not present in keepa_tools; skip bounds test.">/Users/scottmcanally/Desktop/PriceScouter/tests/test_keepa_tools.py:29: _clamp_offers not present in keepa_tools; skip bounds test.</skipped></testcase><testcase classname="tests.test_keepa_tools" name="test_clamp_offers_bounds[10-20]" time="0.000"><skipped type="pytest.skip" message="_clamp_offers not present in keepa_tools; skip bounds test.">/Users/scottmcanally/Desktop/PriceScouter/tests/test_keepa_tools.py:29: _clamp_offers not present in keepa_tools; skip bounds test.</skipped></testcase><testcase classname="tests.test_keepa_tools" name="test_clamp_offers_bounds[20-20]" time="0.000"><skipped type="pytest.skip" message="_clamp_offers not present in keepa_tools; skip bounds test.">/Users/scottmcanally/Desktop/PriceScouter/tests/test_keepa_tools.py:29: _clamp_offers not present in keepa_tools; skip bounds test.</skipped></testcase><testcase classname="tests.test_keepa_tools" name="test_clamp_offers_bounds[65-65]" time="0.000"><skipped type="pytest.skip" message="_clamp_offers not present in keepa_tools; skip bounds test.">/Users/scottmcanally/Desktop/PriceScouter/tests/test_keepa_tools.py:29: _clamp_offers not present in keepa_tools; skip bounds test.</skipped></testcase><testcase classname="tests.test_keepa_tools" name="test_clamp_offers_bounds[150-100]" time="0.000"><skipped type="pytest.skip" message="_clamp_offers not present in keepa_tools; skip bounds test.">/Users/scottmcanally/Desktop/PriceScouter/tests/test_keepa_tools.py:29: _clamp_offers not present in keepa_tools; skip bounds test.</skipped></testcase><testcase classname="tests.test_keepa_tools" name="test_search_products_offers_param_is_clamped" time="0.001" /><testcase classname="tests.test_keepa_tools" name="test_search_products_enriched_fields" time="0.001"><failure message="assert (True and 0 == 2)&#10; +  where True = isinstance([], list)&#10; +  and   0 = len([])">tests/test_keepa_tools.py:158: in test_search_products_enriched_fields
    assert isinstance(rows, list) and len(rows) == 2
E   assert (True and 0 == 2)
E    +  where True = isinstance([], list)
E    +  and   0 = len([])</failure></testcase><testcase classname="tests.test_keepa_tools" name="test_search_products_amazon_competing_negative_signal" time="0.001"><failure message="IndexError: list index out of range">tests/test_keepa_tools.py:189: in test_search_products_amazon_competing_negative_signal
    r1 = rows[1]  # our fake second product has Amazon competing
         ^^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_keepa_tools" name="test_search_products_handles_empty_asins" time="0.000" /><testcase classname="tests.test_perf_latency" name="test_smoke_single_query_under_15s" time="0.000"><skipped type="pytest.skip" message="agents.app.run_agents not exported">/Users/scottmcanally/Desktop/PriceScouter/tests/test_perf_latency.py:61: agents.app.run_agents not exported</skipped></testcase><testcase classname="tests.test_perf_latency" name="test_p95_latency_under_15s" time="0.006"><skipped type="pytest.skip" message="agents.app.run_agents not exported">/Users/scottmcanally/Desktop/PriceScouter/tests/test_perf_latency.py:80: agents.app.run_agents not exported</skipped></testcase><testcase classname="tests.test_perf_latency" name="test_small_load_concurrent_10" time="0.001"><skipped type="pytest.skip" message="agents.app.run_agents not exported">/Users/scottmcanally/Desktop/PriceScouter/tests/test_perf_latency.py:111: agents.app.run_agents not exported</skipped></testcase><testcase classname="tests.test_perf_latency" name="test_vendor_timeout_enforced_under_budget" time="0.001"><skipped type="pytest.skip" message="agents.app.run_agents not exported">/Users/scottmcanally/Desktop/PriceScouter/tests/test_perf_latency.py:128: agents.app.run_agents not exported</skipped></testcase><testcase classname="tests.test_perf_latency" name="test_retry_backoff_within_sla" time="0.001"><skipped type="pytest.skip" message="ebay tools not present">/Users/scottmcanally/Desktop/PriceScouter/tests/test_perf_latency.py:157: ebay tools not present</skipped></testcase><testcase classname="tests.test_search_hist_db" name="test_schema_exists_with_required_columns" time="0.002" /><testcase classname="tests.test_search_hist_db" name="test_insert_and_readback" time="0.002" /><testcase classname="tests.test_search_hist_db" name="test_auto_timestamp_when_missing" time="0.002" /><testcase classname="tests.test_search_hist_db" name="test_multiple_inserts_order" time="0.003" /><testcase classname="tests.test_search_hist_db" name="test_empty_query_not_persisted" time="0.001" /><testcase classname="tests.test_serp_tools" name="test_google_shopping_search_restores_links_and_builds_fallback" time="0.001" /><testcase classname="tests.test_serp_tools" name="test_total_cost_and_free_shipping_flag_from_extensions" time="0.001" /><testcase classname="tests.test_serp_tools" name="test_brand_and_condition_guess_and_speed_flags" time="0.000" /><testcase classname="tests.test_serp_tools" name="test_parse_shipping_cases[$7.99-extensions0-7.99-False]" time="0.000" /><testcase classname="tests.test_serp_tools" name="test_parse_shipping_cases[From $7-extensions1-7.0-False]" time="0.000" /><testcase classname="tests.test_serp_tools" name="test_parse_shipping_cases[None-extensions2-0.0-True]" time="0.000" /><testcase classname="tests.test_serp_tools" name="test_sort_by_usd_places_unsupported_last" time="0.000" /><testcase classname="tests.test_serp_tools" name="test_allowlist_defaults_true" time="0.001" /><testcase classname="tests.test_serp_tools" name="test_fetch_url_combined" time="0.000" /><testcase classname="tests.test_ui_links" name="test_links_render_and_open_button" time="0.013" /><testcase classname="tests.test_ui_links" name="test_no_na_boolean_crash_on_google_like_rows" time="0.010" /><testcase classname="tests.test_ui_links" name="test_provider_agnostic_normalization_across_providers" time="0.012" /><testcase classname="tests.test_vendor_urls" name="test_ebay_url_from_itemWebUrl" time="0.001" /><testcase classname="tests.test_vendor_urls" name="test_ebay_url_falls_back_to_itemHref" time="0.000" /><testcase classname="tests.test_vendor_urls" name="test_ebay_excludes_auction_when_fixed_price_only" time="0.000" /><testcase classname="tests.test_vendor_urls" name="test_keepa_link_canonical_dp" time="0.000"><failure message="IndexError: list index out of range">tests/test_vendor_urls.py:82: in test_keepa_link_canonical_dp
    link = out[0]["link"]
           ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_vendor_urls" name="test_keepa_link_none_when_no_asin" time="0.000"><failure message="IndexError: list index out of range">tests/test_vendor_urls.py:95: in test_keepa_link_none_when_no_asin
    assert out[0]["link"] is None
           ^^^^^^
E   IndexError: list index out of range</failure></testcase><testcase classname="tests.test_vendor_urls" name="test_serp_prefers_product_link" time="0.000" /><testcase classname="tests.test_vendor_urls" name="test_serp_builds_fallback_when_missing_product_link" time="0.000" /><testcase classname="tests.test_vendor_urls" name="test_serp_total_cost_independent_of_link" time="0.001" /></testsuite></testsuites>